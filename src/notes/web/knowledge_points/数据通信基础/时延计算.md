---
order: 5
---

# 时延计算

## 能干什么

数据从网络一端到另一端所需的时间

## 公式

$$
\text{总时延 = 发送时延 + 传播时延 + 处理时延}
$$

::: warning 注意

考试中一般不考虑处理时延，除非给出相应的参数

:::

### 1. 发送时延

$$
\text{发送时延 =} \frac{数据(bit)}{信道带宽(b/s)}
$$

### 2. 传输时延

$$
传输时延 = \frac{信道长度(m)}{电磁波在信道上的传播速度(m/s)}
$$

## 不同介质上的传播速率

+ 在光纤，微波中传播速率是光速 $3×10^8m/s$
+ 在铜线中传播速率为 $2.3×10^8m/s$
+ 在电缆中传播速率为 $2×10^8m/s$
+ 通过卫星传播时，整体传输时延为 $270m/s$

## 例题

1. 以 100Mb/s 以太网连接的站点 A 和 B 相距 2000m，通过停等机制进行数据传输，传播速度为 200m/us，最高的有效传输速率为（）Mb/s？

   因为 `总时延=发送时延+传播时延`，又因为停等协议要求发送方在收到接收方的确认信息之前，不能发送下一个数据帧。

   数据帧的最大长度为1518字节，数据帧的传播时间为 $\frac{2000m}{200m/\pmb{\mu}s}=10\pmb{\mu}s$
   
   所以，发送时延为 
   $$
   \frac{1518B×8}{100Mb/s}+\frac{2000m}{200m/\pmb{\mu}s} \hspace{1.5cm}\\ 
   = \frac{1518B}{1×10^8bit/s}+\frac{2000m}{2×10^8s} \hspace{1.7cm}\\
   = 121.44\pmb{\mu}s+10\pmb{\mu}s \hspace{2.9cm}
   $$
   确认帧的长度为64字节，所以接收时延为
   $$
   \frac{64B×8}{100Mb/s}+\frac{2000m}{200m/\pmb{\mu}s} \hspace{1.7cm}\\ 
   = \frac{1518B}{1×10^8bit/s}+\frac{2000m}{2×10^8s} \hspace{1.7cm}\\
   = 5.12\pmb{\mu}s+10\pmb{\mu}s \hspace{3.2cm}
   $$
   因此，总时间为
   $$
   总时延=121.44\pmb{\mu}s+10\pmb{\mu}s+5.12\pmb{\mu}s+10\pmb{\mu}s=146.56\pmb{\mu}s
   $$
   
   
   有效速率为

$$
\text{有效速率=}\frac{1518×8}{146.56}=82.9Mb/s
$$



