---
title: ç¬¬äºŒç« æ¡ˆä¾‹ - è´­ç‰©è½¦
order: 4
---

# ç¬¬äºŒç« æ¡ˆä¾‹ - è´­ç‰©è½¦

## éœ€æ±‚

1. æ¸²æŸ“åŠŸèƒ½
2. åˆ é™¤åŠŸèƒ½
3. ä¿®æ”¹ä¸ªæ•°
4. å…¨é€‰åé€‰
5. ç»Ÿè®¡é€‰ä¸­çš„æ€»ä»·å’Œæ€»æ•°é‡
6. æŒä¹…åŒ–åˆ°æœ¬åœ°

## å®ç°æ€è·¯

1. åŸºæœ¬æ¸²æŸ“ï¼šv-foréå†ã€:classåŠ¨æ€ç»‘å®šæ ·å¼

2. åˆ é™¤åŠŸèƒ½ ï¼š v-on ç»‘å®šäº‹ä»¶ï¼Œè·å–å½“å‰è¡Œçš„id

3. ä¿®æ”¹ä¸ªæ•° ï¼š v-onç»‘å®šäº‹ä»¶ï¼Œè·å–å½“å‰è¡Œçš„idï¼Œè¿›è¡Œç­›é€‰å‡ºå¯¹åº”çš„é¡¹ç„¶åå¢åŠ æˆ–å‡å°‘

4. å…¨é€‰åé€‰ 

   1. å¿…é¡»æ‰€æœ‰çš„å°é€‰æ¡†éƒ½é€‰ä¸­ï¼Œå…¨é€‰æŒ‰é’®æ‰é€‰ä¸­ â†’ every
   2. å¦‚æœå…¨é€‰æŒ‰é’®é€‰ä¸­ï¼Œåˆ™æ‰€æœ‰å°é€‰æ¡†éƒ½é€‰ä¸­
   3. å¦‚æœå…¨é€‰å–æ¶ˆï¼Œåˆ™æ‰€æœ‰å°é€‰æ¡†éƒ½å–æ¶ˆé€‰ä¸­

   å£°æ˜è®¡ç®—å±æ€§ï¼Œåˆ¤æ–­æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªcheckedå±æ€§çš„å€¼ï¼Œçœ‹æ˜¯å¦éœ€è¦å…¨éƒ¨é€‰

5. ç»Ÿè®¡ é€‰ä¸­çš„ æ€»ä»· å’Œ æ€»æ•°é‡ ï¼šé€šè¿‡è®¡ç®—å±æ€§æ¥è®¡ç®—**é€‰ä¸­çš„**æ€»ä»·å’Œæ€»æ•°é‡

6. æŒä¹…åŒ–åˆ°æœ¬åœ°ï¼š åœ¨æ•°æ®å˜åŒ–æ—¶éƒ½è¦æ›´æ–°ä¸‹æœ¬åœ°å­˜å‚¨ watch

## ä»£ç 

### 1. å‡†å¤‡æ¨¡æ¿

```html
<head>
  <link rel="stylesheet" href="./css/inputnumber.css" />
	<link rel="stylesheet" href="./css/index.css" />
</head>
<body>
  <div class="app-container" id="app">
    <!-- é¡¶éƒ¨banner -->
    <div class="banner-box">
      <img src="http://autumnfish.cn/static/fruit.jpg" alt=""/>
    </div>
    <!-- é¢åŒ…å±‘ -->
    <div class="breadcrumb">
      <span>ğŸ </span>
      /
      <span>è´­ç‰©è½¦</span>
    </div>
    <!-- è´­ç‰©è½¦ä¸»ä½“ -->
    <div class="main">
      <div class="table">
        <!-- å¤´éƒ¨ -->
        <div class="thead">
          <div class="tr">
            <div class="th">é€‰ä¸­</div>
            <div class="th th-pic">å›¾ç‰‡</div>
            <div class="th">å•ä»·</div>
            <div class="th num-th">ä¸ªæ•°</div>
            <div class="th">å°è®¡</div>
            <div class="th">æ“ä½œ</div>
          </div>
        </div>
        <!-- èº«ä½“ -->
        <div class="tbody">
          <div class="tr active">
            <div class="td"><input type="checkbox" checked /></div>
            <div class="td">
            	<img src="http://autumnfish.cn/static/ç«é¾™æœ.png" alt="" />
            </div>
            <div class="td">6</div>
            <div class="td">
              <div class="my-input-number">
                <button class="decrease"> - </button>
                <span class="my-input__inner">2</span>
                <button class="increase"> + </button>
              </div>
            </div>
            <div class="td">12</div>
            <div class="td"><button>åˆ é™¤</button></div>
          </div>
          
          <div class="tr">
            <div class="td"><input type="checkbox"/></div>
            <div class="td">
              <img src="http://autumnfish.cn/static/è”æ.png" alt="" />
            </div>
            <div class="td">7</div>
            <div class="td">
              <div class="my-input-number">
                <button disabled class="decrease"> - </button>
                <span class="my-input__inner">1</span>
                <button class="increase"> + </button>
              </div>
            </div>
            <div class="td">14</div>
            <div class="td"><button>åˆ é™¤</button></div>
          </div>
        </div>
      </div>
      <!-- åº•éƒ¨ -->
      <div class="bottom">
        <!-- å…¨é€‰ -->
        <label class="bottom">
        	<input type="checkbox" />
          å…¨é€‰
        </label>
        <div class="right-box">
          <!-- æ‰€æœ‰å•†å“æ€»ä»· -->
          <span class="price-box">
            æ€»ä»·&nbsp;&nbsp;:&nbsp;&nbsp;Â¥&nbsp;
            <span class="price">24</span>
          </span>
          <!-- ç»“ç®—æŒ‰é’® -->
          <button class="pay">ç»“ç®—( 6 )</button>
        </div>
      </div>
    </div>
    <!-- ç©ºè½¦ -->
    <div class="empty">ğŸ›’ç©ºç©ºå¦‚ä¹Ÿ</div>
  </div>
  
  <script>
  	const app = new Vue({
      el: '#app',
      data: {
        // æ°´æœåˆ—è¡¨
        fruitList: [
          {
            id: 1,
            icon: 'http://autumnfish.cn/static/ç«é¾™æœ.png',
            isChecked: true,
            num: 2,
            price: 6,
          },
          {
            id: 2,
            icon: 'http://autumnfish.cn/static/è”æ.png',
            isChecked: false,
            num: 7,
            price: 20,
          },
          {
            id: 3,
            icon: 'http://autumnfish.cn/static/æ¦´è².png',
            isChecked: false,
            num: 3,
            price: 40,
          },
          {
            id: 4,
            icon: 'http://autumnfish.cn/static/é¸­æ¢¨.png',
            isChecked: true,
            num: 10,
            price: 3,
          },
          {
            id: 5,
            icon: 'http://autumnfish.cn/static/æ¨±æ¡ƒ.png',
            isChecked: false,
            num: 20,
            price: 34,
          },
        ]
      }
    })
  </script>
</body>
```

### 2. æ¸²æŸ“

```html
<!-- è´­ç‰©è½¦ä¸»ä½“ -->
<div class="main" v-if="fruitList.length > 0">
  <!-- èº«ä½“ -->
  <div class="tbody">
    <div 
      v-for="(item, index) in fruitList"
      :key="item.id"
      class="tr"
      :class="{ active: item.isChecked }"
    >
      <div class="td">
        <input type="checkbox" v-model="item.isChecked" />
      </div>
      <div class="td">
        <img :src="item.icon" alt="" />
      </div>
      <div class="td">{{ item.price }}</div>
      <div class="td">
        <div class="my-input-number">
          <button class="decrease"> - </button>
          <span class="my-input__inner">{{ item.num }}</span>
          <button class="increase"> + </button>
        </div>
      </div>
      <div class="td">{{ item.num * item.price }}</div>
      <div class="td"><button>åˆ é™¤</button></div>
    </div>
  </div>
  
  <!-- ç©ºè½¦ -->
  <div class="empty" v-else>ğŸ›’ç©ºç©ºå¦‚ä¹Ÿ</div>
</div>
```

### 3. åˆ é™¤å’Œä¿®æ”¹æ•°é‡

```html
<!-- èº«ä½“ -->
<div class="tbody">
  <div class="td">
    <div class="my-input-number">
      <button :disabled="item.num <= 1" @click="sub(item.id)"> - </button>
      <button class="increase" @click="add(item.id)"> + </button>
    </div>
  </div>
  <div class="td"> 
    <button @click="del(item.id)">
      åˆ é™¤
    </button>
  </div>
</div>

<script>
	const app = new Vue({
    methods: {
      del (id) {
        this.fruitList = this.fruitList.filter(item => item.id !== id)
      },
      add (id) {
        // 1. æ ¹æ® id æ‰¾åˆ°æ•°ç»„ä¸­çš„å¯¹åº”é¡¹ -> find
        const fruit = this.fruitList.find(item => item.id === id)
        // 2. æ“ä½œ num æ•°é‡
        fruit.num++
      },
      sub (id) {
        // 1. æ ¹æ® id æ‰¾åˆ°æ•°ç»„ä¸­çš„å¯¹åº”é¡¹ -> find
        const fruit = this.fruitList.find(item => item.id === id)
        // 2. æ“ä½œ num æ•°é‡
        fruit.num--
      }
    }
  })
</script>
```

3. å…¨é€‰åé€‰

```html
<!-- åº•éƒ¨ -->
<div class="bottom">
  <!-- å…¨é€‰ -->
  <label class="check-all">
  	<input type="checkbox" v-model="isAll" />
    å…¨é€‰
  </label>
</div>

<script>
	const app = new Vue({
    computed: {
      isAll: {
        get () {
          return this.fruitList.every(item => item.isChecked)
        },
        set (value) {
          this.fruitList.forEach(item => item.isChecked = value)
        }
      }
    }
  })
</script>
```

### 4. ç»Ÿè®¡æ€»ä»·å’Œæ€»æ•°é‡

```html
<div class="right-box">
  <!-- æ‰€æœ‰å•†å“æ€»ä»· -->
  <span class="price-box">
    æ€»ä»·&nbsp;&nbsp;:&nbsp;&nbsp;Â¥&nbsp;
    <span class="price">{{ totalPrice }}</span>
  </span>
  <!-- ç»“ç®—æŒ‰é’® -->
  <button class="pay">ç»“ç®—( {{ totalCount }} )</button>
</div>

<script>
	const app = new Vue({
    isAll: {
      // ç»Ÿè®¡é€‰ä¸­çš„æ€»æ•° reduce
      totalCount () {
        return this.fruitList.reduce((sum, item) => {
          if (item.isChecked) {
            // é€‰ä¸­ -> éœ€è¦ç´¯åŠ 
            return sum + item.num
          } else {
            // æ²¡é€‰ä¸­ -> ä¸éœ€è¦ç´¯åŠ 
            return sum
          }
        }, 0)
      },
      // æ€»ä»·é€‰ä¸­çš„æ€»ä»· num * price
      totalPrice () {
        return this.fruitList.reduce((sum, item) => {
          if (item.isChecked) {
            return sum + item.num * item.price
          } else {
            return sum
          }
        }, 0)
      }
    }
  })
</script>
```

### 5. æŒä¹…åŒ–åˆ°æœ¬åœ°

è¿™æ ·çš„è¯æ•°æ®ä¸ä¼šä¸€åˆ·æ–°å°±æ¶ˆå¤±äº†

```html
<script>
	const defaultArr = [
    {
      id: 1,
      icon: 'http://autumnfish.cn/static/ç«é¾™æœ.png',
      isChecked: true,
      num: 2,
      price: 6,
    },
    {...}
  ]
  const app = new Vue({
     el: '#app',
     data: {
     // æ°´æœåˆ—è¡¨
     fruitList: JSON.parse(localStorage.getItem('list')) || defaultArr
    },
    watch: {
      fruitList: {
        deep: true,
        handler (newValue) {
          // éœ€è¦å°†å˜åŒ–åçš„ newValue å­˜å…¥æœ¬åœ° (è½¬JSON)
          localStorage.setItem('list', JSON.stringify(newValue))
        }
      }
    }
  })
</script>
```

![1682051008978](md_img/1682051008978.png)

